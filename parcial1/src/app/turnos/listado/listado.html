<div>
  <h2>Turnos agendados</h2>

  <button (click)="mostrarFormulario = !mostrarFormulario">
    {{ mostrarFormulario ? 'Cerrar formulario' : 'Nuevo Turno' }}
  </button>

  <div *ngIf="mostrarFormulario">
    <app-turnos-formulario (turnoCreado)="onTurnoCreado($event)"></app-turnos-formulario>
  </div>

  <input type="date" [(ngModel)]="fechaSeleccionada" (change)="cargarTurnos()" />

  <table>
    <thead>
      <tr>
        <th>Inicio</th>
        <th>Fin</th>
        <th>Proveedor</th>
        <th>Estado</th>
        <th>Jaula</th>
        <th>Inicio Recepción</th>
        <th>Fin Recepción</th>
        <th>Acciones</th>
        <th>Detalles</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let turno of turnos">
        <td>{{ turno.horaInicioAgendamiento }}</td>
        <td>{{ turno.horaFinAgendamiento }}</td>
        <td>{{ turno.idProveedor }}</td>
        <td>{{ estado(turno) }}</td>
        <td>{{ turno.idJaula || '-' }}</td>
        <td>{{ turno.horaInicioRecepcion || '-' }}</td>
        <td>{{ turno.horaFinRecepcion || '-' }}</td>
        <td>
          <button *ngIf="estado(turno) === 'pendiente'" (click)="iniciarRecepcion(turno)">Iniciar</button>
          <button *ngIf="estado(turno) === 'en recepcion'" (click)="finalizarRecepcion(turno)">Finalizar</button>
        </td>
        <td>
          <button (click)="verDetalles(turno)">Ver detalles</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
